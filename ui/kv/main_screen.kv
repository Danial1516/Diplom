# ui/kv/main_screen.kv

#: import NoTransition kivy.uix.screenmanager.NoTransition

<MainScreen>:
    name: 'main'
    ScreenManager:
        id: screen_manager
        Screen:
            name: 'bottom_nav'
            BoxLayout:
                orientation: 'vertical'

                MDBottomNavigation:
                    size_hint_y: 0.1
                    text_color_normal: "lightgrey"
                    text_color_active: (40/255, 40/255, 75/255, 1)
                    selected_color_background: 1, 1, 1, 1
                    panel_color: (40/255, 40/255, 75/255, 1)
                    use_text: False

                    MDBottomNavigationItem:
                        name: 'home'
                        icon: 'home'

                        MDBoxLayout:
                            orientation: 'vertical'
                            md_bg_color: 28/255, 140/255, 140/255, 1

                            BoxLayout:
                                size_hint_y: .1
                                height: dp(56)
                                padding: dp(8)
                                MDIconButton:
                                    icon: "fire"
                                    theme_icon_color: "Custom"
                                    icon_color: 0.847, 0.208, 0.329, 1

                                Widget:
                                    size_hint_x: None
                                    width: dp(16)

                            MDScrollView:
                                MDBoxLayout:
                                    orientation: 'vertical'
                                    size_hint_y: None
                                    height: self.minimum_height  # Установите высоту на основе содержимого
                                    padding:[dp(15),dp(15),dp(15),dp(35)]
                                    spacing: dp(15)

                                    # Первая строка кнопок
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        spacing: dp(15)
                                        size_hint_y: None
                                        height: dp(150)

                                        ElementCard:
                                            image:"assets/images/book.png"
                                            text:"Знайди відповідність" #practice with time
                                            subtext:""
                                            items_count:""
                                            size_hint_x: 0.5
                                            on_press: app.root.current = 'picture_screen'

                                        ElementCard:
                                            image:"assets/images/story.png"
                                            text:"Groceries"  # practice with cards
                                            subtext:""
                                            items_count:""
                                            size_hint_x: 0.5

                                    # Вторая строка кнопок
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        spacing: dp(15)
                                        size_hint_y: None
                                        height: dp(150)

                                        ElementCard:
                                            image:"assets/images/story.png"
                                            text:"Перевірте свої знання"  # practice with time tasks(rating)
                                            subtext:""
                                            items_count:""
                                            size_hint_x: 0.5
                                            on_press: app.root.current = 'testing'

                                        ElementCard:
                                            image:"assets/images/time.png"
                                            text:"Тест на час"
                                            subtext:""
                                            items_count:""
                                            size_hint_x: 0.5
                                            on_press: app.root.current = 'time_test'

                                    # Третья строка кнопок
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        spacing: dp(15)
                                        size_hint_y: None
                                        height: dp(150)

                                        ElementCard:
                                            image:"assets/images/listen.png"
                                            text:"Аудіювання"
                                            subtext:""
                                            items_count:""
                                            size_hint_x: 0.5
                                            on_press: app.root.current = 'choose_lvl_listen'

                                        ElementCard:
                                            image:"assets/images/ship.png"
                                            text:"Setting"
                                            subtext:""
                                            items_count:""
                                            size_hint_x: 0.5
                                            on_press: app.root.current = 'build_sentence'

                                    MDLabel:
                                        text: "End of the content"
                                        size_hint_y: None
                                        height: self.texture_size[1]
                                        halign: "center"

                    MDBottomNavigationItem:
                        name: 'tasks'
                        icon: 'book-open-page-variant'

                        TasksScreen:



                    MDBottomNavigationItem:
                        name: 'notifications'
                        icon: 'bell'

                        MDScreen:
                            md_bg_color: 28/255, 140/255, 140/255, 1
                            FloatLayout:
                                MDBoxLayout:
                                    orientation: 'vertical'
                                    size_hint_y: None
                                    height: self.minimum_height
                                    padding: [dp(20), dp(40), dp(20), dp(30)]
                                    spacing: dp(50)
                                    pos_hint: {"top": 1}


                                    MDCard:
                                        size_hint: None, None
                                        width: "300dp"
                                        size_hint_y: None
                                        height: self.minimum_height
                                        orientation: "vertical"
                                        md_bg_color: 255/255, 223/255, 186/255, 1
                                        padding: "8dp"
                                        spacing: "8dp"
                                        pos_hint: {"top": 1, "center_x": 0.5}

                                        MDLabel:
                                            text: "Заголовок"
                                            font_name: "Clearsan"
                                            halign: "center"
                                            theme_text_color: "Primary"
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                            pos_hint: {"top": 1}

                                        MDSeparator:
                                            height: "2dp"

                                        MDLabel:
                                            text: "Контент здесь\n 1 12\n 1 "
                                            halign: "left"
                                            valign: "top"
                                            font_name: "Clearsan"
                                            theme_text_color: "Secondary"
                                            size_hint_y: None
                                            text_size: self.width, None
                                            height: self.texture_size[1]





                    MDBottomNavigationItem:
                        name: 'rating'
                        icon: 'chart-bell-curve-cumulative'
                        MDBoxLayout:
                            orientation: 'vertical'
                            md_bg_color: 28/255, 140/255, 140/255, 1
                            MDLabel:
                                text: "rating"
                                halign: "center"


                    MDBottomNavigationItem:
                        name: 'chat'
                        icon: 'pencil'

                        ChatScreen:


<ElementCard@MDCard>:
    md_bg_color: 255/255, 111/255, 97/255, 1
    padding:dp(15)
    spacing:dp(15)
    ripple_behavior: True
    elevation: 2
    shadow_radius: 3
    image:''
    text:""
    items_count:""
    subtext:''

    orientation:'vertical'
    Image:
        source:root.image
    MDBoxLayout:
        orientation:'vertical'
        MDLabel:
            halign:"center"
            text:root.text
            font_style:"H6"
        MDLabel:
            halign:"center"
            font_style:"Caption"
            text:root.subtext
        MDLabel:
            halign:"center"
            text:root.items_count